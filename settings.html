<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Kurukshetra InfoBot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
        }
        
        .gradient-header {
            background: linear-gradient(135deg, #008069 0%, #00a884 100%);
        }
        
        .setting-group {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .theme-btn.active,
        .font-btn.active,
        .bg-btn.active,
        .bubble-btn.active,
        .color-btn.active {
            border-color: #008069;
            background-color: #f0fdf4;
            box-shadow: 0 0 0 3px rgba(0, 128, 105, 0.1);
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: #e5e7eb;
            outline: none;
            border-radius: 15px;
            height: 8px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #008069;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #008069;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
            align-items: center;
            gap: 0.5rem;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        .toast.show {
            display: flex;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Header -->
    <div class="gradient-header text-white p-6 shadow-lg">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <i data-lucide="settings" class="w-8 h-8"></i>
                    <div>
                        <h1 class="text-2xl font-bold">Customization Settings</h1>
                        <p class="text-sm text-white/80">Personalize your InfoBot experience</p>
                    </div>
                </div>
                <a href="index.html" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                    <span>Back to Chat</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto p-6 space-y-6">

        <!-- Theme Selection -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="palette" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Theme</h2>
                    <p class="text-sm text-gray-500">Choose your preferred color scheme</p>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-4">
                <button onclick="setTheme('light')" id="theme-light" class="theme-btn border-2 border-gray-200 p-4 rounded-xl transition hover:scale-105 hover:shadow-lg">
                    <div class="w-full h-20 bg-white border-2 border-gray-200 rounded-lg mb-3 flex items-center justify-center">
                        <i data-lucide="sun" class="w-8 h-8 text-gray-400"></i>
                    </div>
                    <span class="text-sm font-semibold">Light Mode</span>
                </button>
                <button onclick="setTheme('dark')" id="theme-dark" class="theme-btn border-2 border-gray-200 p-4 rounded-xl transition hover:scale-105 hover:shadow-lg">
                    <div class="w-full h-20 bg-gray-900 rounded-lg mb-3 flex items-center justify-center">
                        <i data-lucide="moon" class="w-8 h-8 text-white"></i>
                    </div>
                    <span class="text-sm font-semibold">Dark Mode</span>
                </button>
                <button onclick="setTheme('auto')" id="theme-auto" class="theme-btn border-2 border-gray-200 p-4 rounded-xl transition hover:scale-105 hover:shadow-lg">
                    <div class="w-full h-20 bg-gradient-to-r from-white to-gray-900 rounded-lg mb-3 flex items-center justify-center">
                        <i data-lucide="monitor" class="w-8 h-8 text-gray-600"></i>
                    </div>
                    <span class="text-sm font-semibold">Auto</span>
                </button>
            </div>
        </div>

        <!-- Chat Width -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="maximize-2" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Chat Width</h2>
                    <p class="text-sm text-gray-500">Adjust the chat interface width</p>
                </div>
            </div>
            <div class="space-y-4">
                <input type="range" id="width-slider" min="60" max="100" value="100" 
                       class="w-full"
                       oninput="updateWidth(this.value)">
                <div class="flex justify-between text-sm text-gray-500">
                    <span>60% - Narrow</span>
                    <span id="width-value" class="font-bold text-[#008069]">100%</span>
                    <span>100% - Full Width</span>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <div id="width-preview" class="bg-white border-2 border-gray-300 rounded-lg p-3 transition-all duration-300" style="width: 100%;">
                        <div class="text-xs text-gray-500 text-center">Preview</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Font Size -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="type" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Font Size</h2>
                    <p class="text-sm text-gray-500">Choose comfortable reading size</p>
                </div>
            </div>
            <div class="grid grid-cols-4 gap-3">
                <button onclick="setFontSize('small')" id="font-small" class="font-btn border-2 border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition">
                    <div class="text-xs mb-2">Small</div>
                    <div class="text-xs text-gray-600">12px</div>
                </button>
                <button onclick="setFontSize('medium')" id="font-medium" class="font-btn border-2 border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition">
                    <div class="text-sm mb-2">Medium</div>
                    <div class="text-xs text-gray-600">14px</div>
                </button>
                <button onclick="setFontSize('large')" id="font-large" class="font-btn border-2 border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition">
                    <div class="text-base mb-2">Large</div>
                    <div class="text-xs text-gray-600">16px</div>
                </button>
                <button onclick="setFontSize('xlarge')" id="font-xlarge" class="font-btn border-2 border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition">
                    <div class="text-lg mb-2">X-Large</div>
                    <div class="text-xs text-gray-600">18px</div>
                </button>
            </div>
        </div>

        <!-- Accent Color -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="droplet" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Accent Color</h2>
                    <p class="text-sm text-gray-500">Personalize with your favorite color</p>
                </div>
            </div>
            <div class="grid grid-cols-6 gap-3">
                <button onclick="setAccentColor('#008069')" id="color-1" class="color-btn w-full h-16 rounded-lg border-4 border-gray-200 transition hover:scale-110" style="background: #008069" title="WhatsApp Green"></button>
                <button onclick="setAccentColor('#0088cc')" id="color-2" class="color-btn w-full h-16 rounded-lg border-4 border-gray-200 transition hover:scale-110" style="background: #0088cc" title="Telegram Blue"></button>
                <button onclick="setAccentColor('#7c3aed')" id="color-3" class="color-btn w-full h-16 rounded-lg border-4 border-gray-200 transition hover:scale-110" style="background: #7c3aed" title="Purple"></button>
                <button onclick="setAccentColor('#dc2626')" id="color-4" class="color-btn w-full h-16 rounded-lg border-4 border-gray-200 transition hover:scale-110" style="background: #dc2626" title="Red"></button>
                <button onclick="setAccentColor('#ea580c')" id="color-5" class="color-btn w-full h-16 rounded-lg border-4 border-gray-200 transition hover:scale-110" style="background: #ea580c" title="Orange"></button>
                <button onclick="setAccentColor('#059669')" id="color-6" class="color-btn w-full h-16 rounded-lg border-4 border-gray-200 transition hover:scale-110" style="background: #059669" title="Green"></button>
            </div>
        </div>

        <!-- Background -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="image" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Background Style</h2>
                    <p class="text-sm text-gray-500">Choose your chat background</p>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-4">
                <button onclick="setBackground('whatsapp')" id="bg-whatsapp" class="bg-btn border-2 border-gray-200 p-4 rounded-xl hover:scale-105 transition">
                    <div class="w-full h-20 bg-[#efeae2] rounded-lg mb-3 bg-opacity-40" style="background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png'); background-size: 300px;"></div>
                    <span class="text-sm font-semibold">WhatsApp Classic</span>
                </button>
                <button onclick="setBackground('solid')" id="bg-solid" class="bg-btn border-2 border-gray-200 p-4 rounded-xl hover:scale-105 transition">
                    <div class="w-full h-20 bg-white border-2 border-gray-200 rounded-lg mb-3"></div>
                    <span class="text-sm font-semibold">Solid White</span>
                </button>
                <button onclick="setBackground('gradient')" id="bg-gradient" class="bg-btn border-2 border-gray-200 p-4 rounded-xl hover:scale-105 transition">
                    <div class="w-full h-20 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 rounded-lg mb-3"></div>
                    <span class="text-sm font-semibold">Soft Gradient</span>
                </button>
            </div>
        </div>

        <!-- Message Bubble Style -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="message-circle" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Message Bubble Style</h2>
                    <p class="text-sm text-gray-500">Choose bubble corner style</p>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="setBubbleStyle('rounded')" id="bubble-rounded" class="bubble-btn border-2 border-gray-200 p-4 rounded-xl hover:bg-gray-50 transition">
                    <div class="bg-[#d9fdd3] rounded-2xl p-4 mb-3 text-sm">
                        Rounded corners<br/>WhatsApp style
                    </div>
                    <span class="text-sm font-semibold">Rounded</span>
                </button>
                <button onclick="setBubbleStyle('sharp')" id="bubble-sharp" class="bubble-btn border-2 border-gray-200 p-4 rounded-xl hover:bg-gray-50 transition">
                    <div class="bg-gray-200 rounded p-4 mb-3 text-sm">
                        Sharp corners<br/>Modern style
                    </div>
                    <span class="text-sm font-semibold">Sharp</span>
                </button>
            </div>
        </div>

        <!-- Advanced Settings -->
        <div class="setting-group">
            <div class="flex items-center gap-3 mb-4">
                <i data-lucide="sliders" class="w-6 h-6 text-[#008069]"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800">Advanced Options</h2>
                    <p class="text-sm text-gray-500">Fine-tune your experience</p>
                </div>
            </div>
            <div class="space-y-4">
                <!-- Animations -->
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center gap-3">
                        <i data-lucide="zap" class="w-5 h-5 text-gray-600"></i>
                        <div>
                            <div class="font-semibold text-gray-800">Enable Animations</div>
                            <div class="text-xs text-gray-500">Smooth transitions and effects</div>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="animations-toggle" class="sr-only peer" checked onchange="toggleAnimations(this.checked)">
                        <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-[#008069]"></div>
                    </label>
                </div>

                <!-- Compact Mode -->
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center gap-3">
                        <i data-lucide="minimize-2" class="w-5 h-5 text-gray-600"></i>
                        <div>
                            <div class="font-semibold text-gray-800">Compact Mode</div>
                            <div class="text-xs text-gray-500">Reduce spacing between messages</div>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="compact-toggle" class="sr-only peer" onchange="toggleCompact(this.checked)">
                        <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-[#008069]"></div>
                    </label>
                </div>

                <!-- Show Timestamps -->
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center gap-3">
                        <i data-lucide="clock" class="w-5 h-5 text-gray-600"></i>
                        <div>
                            <div class="font-semibold text-gray-800">Show Timestamps</div>
                            <div class="text-xs text-gray-500">Display message time</div>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="timestamps-toggle" class="sr-only peer" checked onchange="toggleTimestamps(this.checked)">
                        <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-[#008069]"></div>
                    </label>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="grid grid-cols-2 gap-4">
            <button onclick="resetSettings()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-4 px-6 rounded-xl transition flex items-center justify-center gap-2 shadow-sm">
                <i data-lucide="rotate-ccw" class="w-5 h-5"></i>
                Reset to Default
            </button>
            <button onclick="saveAndReturn()" class="bg-gradient-to-r from-[#008069] to-[#00a884] hover:from-[#006d59] hover:to-[#008f73] text-white font-bold py-4 px-6 rounded-xl transition flex items-center justify-center gap-2 shadow-lg">
                <i data-lucide="check" class="w-5 h-5"></i>
                Save & Return
            </button>
        </div>

    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i data-lucide="check-circle" class="w-5 h-5"></i>
        <span id="toast-message">Settings saved!</span>
    </div>

    <!-- Footer -->
    <div class="text-center py-8 text-sm text-gray-500">
        <p>Â© 2026 District Administration Kurukshetra</p>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Default settings
        const defaultSettings = {
            theme: 'light',
            width: 100,
            fontSize: 'medium',
            accentColor: '#008069',
            background: 'whatsapp',
            bubbleStyle: 'rounded',
            animations: true,
            compact: false,
            timestamps: true
        };

        // Load settings on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
        });

        // Load settings from localStorage
        function loadSettings() {
            const saved = localStorage.getItem('infobotSettings');
            const settings = saved ? JSON.parse(saved) : defaultSettings;
            
            // Apply all settings
            setTheme(settings.theme, false);
            updateWidth(settings.width, false);
            setFontSize(settings.fontSize, false);
            setAccentColor(settings.accentColor, false);
            setBackground(settings.background, false);
            setBubbleStyle(settings.bubbleStyle, false);
            
            // Update toggles
            document.getElementById('animations-toggle').checked = settings.animations;
            document.getElementById('compact-toggle').checked = settings.compact;
            document.getElementById('timestamps-toggle').checked = settings.timestamps;
            
            // Update slider
            document.getElementById('width-slider').value = settings.width;
        }

        // Save settings to localStorage
        function saveSettings() {
            const settings = {
                theme: getActiveTheme(),
                width: parseInt(document.getElementById('width-slider').value),
                fontSize: getActiveFontSize(),
                accentColor: getCurrentAccentColor(),
                background: getActiveBackground(),
                bubbleStyle: getActiveBubbleStyle(),
                animations: document.getElementById('animations-toggle').checked,
                compact: document.getElementById('compact-toggle').checked,
                timestamps: document.getElementById('timestamps-toggle').checked
            };
            
            localStorage.setItem('infobotSettings', JSON.stringify(settings));
            showToast('Settings saved successfully!');
        }

        // Theme functions
        function setTheme(theme, save = true) {
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('theme-' + theme)?.classList.add('active');
            if (save) saveSettings();
        }

        function getActiveTheme() {
            const active = document.querySelector('.theme-btn.active');
            return active ? active.id.replace('theme-', '') : 'light';
        }

        // Width function
        function updateWidth(value, save = true) {
            document.getElementById('width-value').textContent = value + '%';
            document.getElementById('width-preview').style.width = value + '%';
            if (save) saveSettings();
        }

        // Font size functions
        function setFontSize(size, save = true) {
            document.querySelectorAll('.font-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('font-' + size)?.classList.add('active');
            if (save) saveSettings();
        }

        function getActiveFontSize() {
            const active = document.querySelector('.font-btn.active');
            return active ? active.id.replace('font-', '') : 'medium';
        }

        // Accent color functions
        function setAccentColor(color, save = true) {
            document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
            
            // Find and activate the button with this color
            const buttons = document.querySelectorAll('.color-btn');
            buttons.forEach(btn => {
                if (btn.style.background === color) {
                    btn.classList.add('active');
                }
            });
            
            // Update gradient header
            const header = document.querySelector('.gradient-header');
            if (header) {
                header.style.background = `linear-gradient(135deg, ${color} 0%, ${lightenColor(color, 20)} 100%)`;
            }
            
            if (save) saveSettings();
        }

        function getCurrentAccentColor() {
            const active = document.querySelector('.color-btn.active');
            return active ? active.style.background : '#008069';
        }

        // Background functions
        function setBackground(bg, save = true) {
            document.querySelectorAll('.bg-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('bg-' + bg)?.classList.add('active');
            if (save) saveSettings();
        }

        function getActiveBackground() {
            const active = document.querySelector('.bg-btn.active');
            return active ? active.id.replace('bg-', '') : 'whatsapp';
        }

        // Bubble style functions
        function setBubbleStyle(style, save = true) {
            document.querySelectorAll('.bubble-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('bubble-' + style)?.classList.add('active');
            if (save) saveSettings();
        }

        function getActiveBubbleStyle() {
            const active = document.querySelector('.bubble-btn.active');
            return active ? active.id.replace('bubble-', '') : 'rounded';
        }

        // Toggle functions
        function toggleAnimations(enabled, save = true) {
            if (save) saveSettings();
        }

        function toggleCompact(enabled, save = true) {
            if (save) saveSettings();
        }

        function toggleTimestamps(enabled, save = true) {
            if (save) saveSettings();
        }

        // Reset all settings
        function resetSettings() {
            if (confirm('Reset all settings to default? This cannot be undone.')) {
                localStorage.setItem('infobotSettings', JSON.stringify(defaultSettings));
                showToast('Settings reset to default');
                setTimeout(() => location.reload(), 1000);
            }
        }

        // Save and return to chat
        function saveAndReturn() {
            saveSettings();
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 500);
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
            lucide.createIcons();
        }

        // Helper function to lighten color
        function lightenColor(color, percent) {
            const num = parseInt(color.replace("#",""), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.min(255, (num >> 16) + amt);
            const G = Math.min(255, (num >> 8 & 0x00FF) + amt);
            const B = Math.min(255, (num & 0x0000FF) + amt);
            return "#" + (0x1000000 + R*0x10000 + G*0x100 + B).toString(16).slice(1);
        }

        // Auto-save on any change
        document.getElementById('width-slider').addEventListener('input', () => saveSettings());
    </script>
</body>
</html>
